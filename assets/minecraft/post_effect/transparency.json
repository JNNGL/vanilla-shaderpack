{
    "targets" : {
        "swap": {},
        "swap2": {},

        "normals": {},
        "prev_normals": {},

        "shadowmap_depth": {},
        "shadowmap_depth_cache": {"width": 1922, "height": 1080},

        "shadow": {},
        "shadow_temp": {},
        "shadow_prev": {"width": 1920, "height": 1080},

        "final": {},
        "final_comp": {},
        "final_prev": {"width": 1921, "height": 1080},

        "transmittance": {"width": 256, "height": 128},
        "sky_view": {"width": 200, "height": 200},
        "aerial_perspective": {"width": 576, "height": 48}
    },
    "passes": [
        {
            "program": "minecraft:atmosphere/transmittance",
            "inputs": [],
            "output": "transmittance"
        },
        {
            "program": "minecraft:atmosphere/sky_view",
            "inputs": [ { "sampler_name": "Data", "target": "minecraft:main" },
                        { "sampler_name": "Transmittance", "target": "transmittance" } ],
            "output": "sky_view"
        },
        {
            "program": "minecraft:atmosphere/aerial_perspective",
            "inputs": [ { "sampler_name": "Data", "target": "minecraft:main" },
                        { "sampler_name": "Transmittance", "target": "transmittance" } ],
            "output": "aerial_perspective"
        },

        {
            "program": "minecraft:buffer/shadowmap",
            "inputs": [ { "sampler_name": "Data", "target": "minecraft:main" },
                        { "sampler_name": "Depth", "target": "minecraft:main", "use_depth_buffer": true },
                        { "sampler_name": "Previous", "target": "shadowmap_depth_cache" } ],
            "output": "shadowmap_depth"
        },
        {
            "program": "minecraft:workaround/copy_over_frame",
            "inputs": [ { "sampler_name": "In", "target": "shadowmap_depth" } ],
            "output": "shadowmap_depth_cache"
        },

        {
            "program": "minecraft:buffer/normals",
            "inputs": [ { "sampler_name": "Data", "target": "minecraft:main" },
                        { "sampler_name": "Depth", "target": "minecraft:main", "use_depth_buffer": true },
                        { "sampler_name": "Mojank", "target": "shadowmap_depth_cache" } ],
            "output": "normals"
        },

        {
            "program": "minecraft:main/shadow",
            "inputs": [ { "sampler_name": "Data", "target": "minecraft:main" },
                        { "sampler_name": "Depth", "target": "minecraft:main", "use_depth_buffer": true },
                        { "sampler_name": "ShadowMap", "target": "shadowmap_depth" },
                        { "sampler_name": "Normal", "target": "normals" },
                        { "sampler_name": "Noise", "location": "blue_noise", "width": 512, "height": 512 },
                        { "sampler_name": "Frame", "target": "shadow_prev" } ],
            "output": "shadow"
        },

        {
            "program": "minecraft:main/temporal",
            "inputs": [ { "sampler_name": "In", "target": "shadow" },
                        { "sampler_name": "Data", "target": "minecraft:main" },
                        { "sampler_name": "Depth", "target": "minecraft:main", "use_depth_buffer": true },
                        { "sampler_name": "Previous", "target": "shadow_prev" } ],
            "output": "shadow_temp"
        },

        {
            "program": "minecraft:workaround/copy_over_frame",
            "inputs": [ { "sampler_name": "In", "target": "shadow_temp" } ],
            "output": "shadow_prev"
        },

        {
            "program": "minecraft:main/shade",
            "inputs": [ { "sampler_name": "In", "target": "minecraft:main" },
                        { "sampler_name": "Data", "target": "minecraft:main" },
                        { "sampler_name": "Depth", "target": "minecraft:main", "use_depth_buffer": true },
                        { "sampler_name": "Shadow", "target": "shadow_prev" },
                        { "sampler_name": "Normal", "target": "normals" },
                        { "sampler_name": "Sky", "target": "sky_view" },
                        { "sampler_name": "AerialPerspective", "target": "aerial_perspective" },
                        { "sampler_name": "Transmittance", "target": "transmittance" },
                        { "sampler_name": "ShadowMap", "target": "shadowmap_depth" },
                        { "sampler_name": "Noise", "location": "blue_noise", "width": 512, "height": 512 } ],
            "output": "final"
        },

        {
            "program": "minecraft:post/composite",
            "inputs": [ { "sampler_name": "In", "target": "final" },
                        { "sampler_name": "Data", "target": "minecraft:main"},
                        { "sampler_name": "Fallback", "target": "final_prev" } ],
            "output": "final_comp"
        },
        {
            "program": "minecraft:workaround/copy_over_frame",
            "inputs": [ { "sampler_name": "In", "target": "final_comp" } ],
            "output": "final_prev"
        },

        {
            "program": "minecraft:post/fxaa",
            "inputs": [ { "sampler_name": "In", "target": "final_comp", "bilinear": true },
                        { "sampler_name": "Mojank", "target": "final_prev" } ],
            "output": "minecraft:main"
        }
    ]
}
